## Programs ############################################################
CC      := gcc
RM      := rm -f

## Flags ###############################################################
CFLAGS  := -ansi -Wall -pedantic -Wno-unused-result -g
LDFLAGS := -g

## Objects #############################################################
COMMON  := common/structure.o common/input.o common/simpleApproxCut.o

t1_obj  	  := task1.o        $(COMMON) list/queue.o
t2_simpleApproxCut_obj := task2-simpleApproxCut.o $(COMMON)
t2_approxCut_obj := task2-approxCut.o $(COMMON) list/queue.o
t3_obj     	  := task3.o        $(COMMON)

## Rules ###############################################################

.PHONY: all
all: t1 t2-simpleApproxCut t2-approxCut t3

## Linkage #############################################################
t1: $(t1_obj)
	$(CC) $^ -o $@ $(LDFLAGS)

t3: $(t3_obj)
	$(CC) $^ -o $@ $(LDFLAGS)

t2-simpleApproxCut: $(t2_simpleApproxCut_obj)
	$(CC) $^ -o $@ $(LDFLAGS)

t2-approxCut: $(t2_approxCut_obj)
	$(CC) $^ -o $@ $(LDFLAGS)



## Compilation #########################################################
%.o: %.c root.h
	$(CC) $(CFLAGS) -c $< -o $@

common/%.o: common/%.c common/%.h
	$(CC) $(CFLAGS) -c $< -o $@

list/%.o: list/%.c list/%.h
	$(CC) $(CFLAGS) -c $< -o $@

## Clean ###############################################################
.PHONY: clean
clean:
	$(RM) common/*.o list/*.o *.o




#exec
#t1: task1.o structure.o input.o queue.o
#	gcc task1.o structure.o input.o queue.o -o t1
#t2-simpleApproxCut: task2-simpleApproxCut.o structure.o input.o simpleApproxCut.o
#	gcc task2-simpleApproxCut.o structure.o input.o simpleApproxCut.o -o t2-simpleApproxCut
#t2-approxCut: task2-approxCut.o structure.o input.o queue.o simpleApproxCut.o
#	gcc task2-approxCut.o structure.o input.o queue.o simpleApproxCut.o -o t2-approxCut
#t3: task3.o structure.o input.o 

# ROOT
#task1.o: task1.c root.h
#	gcc -Wall -ansi -pedantic -Wno-unused-result 	 -c task1.c -g
#task2-simpleApproxCut.o: task2-simpleApproxCut.c
#	gcc -Wall -ansi -pedantic -Wno-unused-result -c task2-simpleApproxCut.c -g
#task2-approxCut.o: task2-approxCut.c
#	gcc -Wall -ansi -pedantic -Wno-unused-result -c task2-approxCut.c -g
#task3.o: task3.c root.h
#	gcc -Wall -ansi -pedantic -Wno-unused-result -c task3.c -g


# COMMON
#simpleApproxCut.o: common/simpleApproxCut.c common/simpleApproxCut.h
#	gcc -Wall -ansi -pedantic -Wno-unused-result -c common/simpleApproxCut.c -g
#input.o: common/input.c common/input.h
#	gcc -Wall -ansi -pedantic -Wno-unused-result -c common/input.c -g
#structure.o: common/structure.c common/structure.h
#	gcc -Wall -ansi -pedantic -Wno-unused-result -c common/structure.c -g


# LIST
#queue.o: list/queue.c list/queue.h
#	gcc -Wall -ansi -pedantic -Wno-unused-result -c list/queue.c -g
